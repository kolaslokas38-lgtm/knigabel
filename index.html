<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–Ω—ñ–≥–∞–ë–µ–ª - –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üìö –ö–Ω—ñ–≥–∞–ë–µ–ª</h1>
                <p>–í–∞—à–∞ —Ü–∏—Ñ—Ä–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</p>
            </div>
            <div class="stats" id="stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalBooks">0</span>
                    <span class="stat-label">–í—Å–µ–≥–æ –∫–Ω–∏–≥</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="availableBooks">0</span>
                    <span class="stat-label">–î–æ—Å—Ç—É–ø–Ω–æ</span>
                </div>
            </div>
            <div class="theme-toggle">
                <button onclick="toggleTheme()" class="theme-btn" id="themeToggle">
                    <span id="themeIcon">üåô</span>
                </button>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <section class="navigation-section">
            <div class="nav-tabs">
                <button class="nav-btn active" onclick="showSection('catalog')">
                    <span class="nav-icon">üìö</span>
                    <span class="nav-text">–ö–∞—Ç–∞–ª–æ–≥</span>
                </button>
                <button class="nav-btn" onclick="showSection('events')">
                    <span class="nav-icon">üìÖ</span>
                    <span class="nav-text">–°–æ–±—ã—Ç–∏—è</span>
                </button>
                <button class="nav-btn" onclick="showSection('redbook')">
                    <span class="nav-icon">üêæ</span>
                    <span class="nav-text">–ö—Ä–∞—Å–Ω–∞—è –ö–Ω–∏–≥–∞</span>
                </button>
                <button class="nav-btn" onclick="showSection('profile')">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-text">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </div>
        </section>

        <!-- Search Section -->
        <section class="search-section" id="searchSection">
            <div class="search-container">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞–≤—Ç–æ—Ä—É –∏–ª–∏ –∂–∞–Ω—Ä—É..."
                    class="search-input"
                >
                <button onclick="searchBooks()" class="search-btn">üîç</button>
            </div>
            
            <div class="filter-container">
                <select id="genreFilter" class="genre-filter" onchange="filterByGenre()">
                    <option value="">–ó–∞–≥—Ä—É–∑–∫–∞ –∂–∞–Ω—Ä–æ–≤...</option>
                </select>
            </div>
        </section>

        <!-- –ö–Ω–∏–≥–∏ –Ω–µ–¥–µ–ª–∏ -->
        <section class="weekly-books-section">
            <h2 class="weekly-books-title">üìö –ö–Ω–∏–≥–∏ –Ω–µ–¥–µ–ª–∏</h2>
            <div class="weekly-books-container" id="weeklyBooksContainer">
                <!-- –ö–Ω–∏–≥–∏ –Ω–µ–¥–µ–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
        </section>

        <!-- –ö–Ω–∏–≥–∞ –¥–Ω—è -->
        <section class="book-of-day-section">
            <h2 class="book-of-day-title">‚≠ê –ö–Ω–∏–≥–∞ –¥–Ω—è</h2>
            <div class="book-of-day-container" id="bookOfDayContainer">
                <!-- –ö–Ω–∏–≥–∞ –¥–Ω—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–¥–µ—Å—å -->
            </div>
        </section>

        <!-- Catalog Section -->
        <section class="content-section active" id="catalogSection">
            <div class="section-header">
                <h2 id="sectionTitle">–ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥</h2>
                <span class="books-count" id="booksCount">0 –∫–Ω–∏–≥</span>
            </div>
            
            <div class="books-container" id="booksContainer">
                <!-- Books will be loaded here -->
            </div>
            
            <div class="loading hidden" id="loading">
                <div class="spinner"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...</p>
            </div>
            
            <div class="empty-state hidden" id="emptyState">
                <div class="empty-icon">üìö</div>
                <h3>–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä</p>
                <button onclick="clearFilters()" class="clear-btn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
            </div>
        </section>

        <!-- Events Section -->
        <section class="content-section" id="eventsSection">
            <div class="section-header">
                <h2>üìÖ –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h2>
                <span class="events-count" id="eventsCount">0 —Å–æ–±—ã—Ç–∏–π</span>
            </div>

            <div class="events-container" id="eventsContainer">
                <!-- Events will be loaded here -->
            </div>

            <div class="loading hidden" id="eventsLoading">
                <div class="spinner"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π...</p>
            </div>

            <div class="empty-state hidden" id="eventsEmptyState">
                <div class="empty-icon">üìÖ</div>
                <h3>–°–æ–±—ã—Ç–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</p>
            </div>
        </section>

        <!-- Red Book Section -->
        <section class="content-section" id="redbookSection">
            <div class="section-header">
                <h2>üêæ –ö—Ä–∞—Å–Ω–∞—è –ö–Ω–∏–≥–∞ –ë–µ–ª–∞—Ä—É—Å–∏</h2>
                <span class="books-count" id="animalsCount">0 –∂–∏–≤–æ—Ç–Ω—ã—Ö</span>
            </div>
            
            <div class="animals-container" id="animalsContainer">
                <!-- Animals will be loaded here -->
            </div>
        </section>

        <!-- Profile Section -->
        <section class="content-section" id="profileSection">
            <div class="profile-header">
                <div class="user-avatar" id="userAvatar">
                    <div class="avatar-placeholder">üë§</div>
                </div>
                <div class="user-info">
                    <h2 id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                    <p class="user-registration" id="userRegistration">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ...</p>
                    <div class="user-stats">
                        <span class="user-stat">üìö <span id="userTotalBooks">0</span> –∫–Ω–∏–≥</span>
                        <span class="user-stat">‚≠ê <span id="userFavorites">0</span> –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö</span>
                        <span class="user-stat">üí¨ <span id="userReviewsCount">0</span> –æ—Ç–∑—ã–≤–æ–≤</span>
                    </div>
                </div>
            </div>

            <!-- Profile Stats -->
            <div class="profile-stats">
                <div class="stat-card profile-stat">
                    <div class="stat-icon">üìñ</div>
                    <div class="stat-content">
                        <div class="stat-number" id="activeBorrows">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–∏–≥–∏</div>
                    </div>
                </div>
                <div class="stat-card profile-stat">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalRead">0</div>
                        <div class="stat-label">–ü—Ä–æ—á–∏—Ç–∞–Ω–æ</div>
                    </div>
                </div>
                <div class="stat-card profile-stat">
                    <div class="stat-icon">‚è∞</div>
                    <div class="stat-content">
                        <div class="stat-number" id="readingTime">0</div>
                        <div class="stat-label">–î–Ω–µ–π —Å –Ω–∞–º–∏</div>
                    </div>
                </div>
                <div class="stat-card profile-stat">
                    <div class="stat-icon">üí¨</div>
                    <div class="stat-content">
                        <div class="stat-number" id="userReviewsWritten">0</div>
                        <div class="stat-label">–ù–∞–ø–∏—Å–∞–Ω–æ –æ—Ç–∑—ã–≤–æ–≤</div>
                    </div>
                </div>
            </div>

            <!-- Active Borrows -->
            <div class="profile-section-card">
                <div class="section-title">
                    <h3>üìö –ú–æ–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–∏–≥–∏</h3>
                    <span class="section-badge" id="activeBooksCount">0</span>
                </div>
                <div class="borrowed-books-list" id="activeBooksList">
                    <!-- Active books will be loaded here -->
                </div>
            </div>

            <!-- Borrowing History -->
            <div class="profile-section-card">
                <div class="section-title">
                    <h3>üïê –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</h3>
                    <span class="section-badge" id="historyCount">0</span>
                </div>
                <div class="history-list" id="historyList">
                    <!-- History will be loaded here -->
                </div>
            </div>

            <!-- Favorites -->
            <div class="profile-section-card">
                <div class="section-title">
                    <h3>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏</h3>
                    <span class="section-badge" id="favoritesCount">0</span>
                </div>
                <div class="favorites-list" id="favoritesList">
                    <!-- Favorites will be loaded here -->
                </div>
            </div>

            <!-- My Reviews -->
            <div class="profile-section-card">
                <div class="section-title">
                    <h3>üí¨ –ú–æ–∏ –æ—Ç–∑—ã–≤—ã</h3>
                    <span class="section-badge" id="myReviewsCount">0</span>
                </div>
                <div class="my-reviews-list" id="myReviewsList">
                    <!-- My reviews will be loaded here -->
                </div>
            </div>

            <!-- Booked Events -->
            <div class="profile-section-card">
                <div class="section-title">
                    <h3>üé´ –ú–æ–∏ —Å–æ–±—ã—Ç–∏—è</h3>
                    <span class="section-badge" id="bookedEventsCount">0</span>
                </div>
                <div class="booked-events-list" id="bookedEventsList">
                    <!-- Booked events will be loaded here -->
                </div>
            </div>

            <!-- Data Management -->
            <div class="profile-section-card">
                <div class="section-title">
                    <h3>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h3>
                </div>
                <div class="data-management">
                    <button class="clear-data-btn" onclick="clearAllData()">
                        üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
                    </button>
                    <p class="data-info">–¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                </div>
            </div>
        </section>

        <!-- Book Modal -->
        <div class="modal hidden" id="bookModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">–î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏</h3>
                    <button onclick="closeModal()" class="close-btn">√ó</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Add Review Modal -->
        <div class="modal hidden" id="reviewModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤</h3>
                    <button onclick="closeReviewModal()" class="close-btn">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="review-form">
                        <div class="form-group">
                            <label>–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞:</label>
                            <div class="rating-selector">
                                <span class="rating-stars">
                                    <span class="star" onclick="setRating(1)">‚òÜ</span>
                                    <span class="star" onclick="setRating(2)">‚òÜ</span>
                                    <span class="star" onclick="setRating(3)">‚òÜ</span>
                                    <span class="star" onclick="setRating(4)">‚òÜ</span>
                                    <span class="star" onclick="setRating(5)">‚òÜ</span>
                                </span>
                                <span class="rating-text" id="ratingText">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>–í–∞—à –æ—Ç–∑—ã–≤:</label>
                            <textarea 
                                id="reviewComment" 
                                placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ –æ –∫–Ω–∏–≥–µ..."
                                rows="4"
                                maxlength="500"
                                oninput="updateCharCount()"
                            ></textarea>
                            <div class="char-count"><span id="charCount">0</span>/500</div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="cancel-btn" onclick="closeReviewModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="button" class="submit-btn" onclick="submitReview()" disabled>–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Modal -->
        <div class="modal hidden" id="eventModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="eventModalTitle">–î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</h3>
                    <button onclick="closeEventModal()" class="close-btn">√ó</button>
                </div>
                <div class="modal-body" id="eventModalBody">
                    <!-- Event details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Booking Modal -->
        <div class="modal hidden" id="bookingModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üé´ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–∞</h3>
                    <button onclick="closeBookingModal()" class="close-btn">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="booking-form">
                        <div class="form-group">
                            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤:</label>
                            <div class="ticket-selector">
                                <button type="button" onclick="changeTicketCount(-1)" class="ticket-btn">-</button>
                                <span id="ticketCount">1</span>
                                <button type="button" onclick="changeTicketCount(1)" class="ticket-btn">+</button>
                            </div>
                        </div>
                        <div class="booking-summary">
                            <p>–¶–µ–Ω–∞ –∑–∞ –±–∏–ª–µ—Ç: <span id="ticketPrice">0</span> BYN</p>
                            <p>–ò—Ç–æ–≥–æ: <span id="totalPrice">0</span> BYN</p>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="cancel-btn" onclick="closeBookingModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="button" class="book-btn" onclick="confirmBooking()" id="bookBtn">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ñ–∞–π–ª—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
    <script src="data.js"></script>
    <script src="storage.js"></script>
    <script src="app.js"></script>
</body>
</html>